{"ast":null,"code":"var _jsxFileName = \"/Users/vlad/Desktop/weather/src/WeatherCard.js\";\nimport React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport './index.css';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: 345,\n    marginRight: 50,\n    marginBottom: 50,\n    borderRadius: 25,\n    padding: 10\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest\n    })\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)'\n  }\n}));\nexport default function WeatherCard({\n  city,\n  remove\n}) {\n  const [cityName, setCityName] = useState(city);\n  const [weatherData, setWeatherData] = useState({\n    \"coord\": {\n      \"lon\": 0,\n      \"lat\": 0\n    },\n    \"weather\": [{\n      \"id\": 0,\n      \"main\": \"\",\n      \"description\": \"\",\n      \"icon\": \"\"\n    }],\n    \"base\": \"\",\n    \"main\": {\n      \"temp\": 0,\n      \"feels_like\": 0,\n      \"temp_min\": 0,\n      \"temp_max\": 0,\n      \"pressure\": 0,\n      \"humidity\": 0\n    },\n    \"visibility\": 0,\n    \"wind\": {\n      \"speed\": 0,\n      \"deg\": 0\n    },\n    \"clouds\": {\n      \"all\": 0\n    },\n    \"dt\": 0,\n    \"sys\": {\n      \"type\": 0,\n      \"id\": 0,\n      \"message\": 0,\n      \"country\": \"\",\n      \"sunrise\": 0,\n      \"sunset\": 0\n    },\n    \"timezone\": 0,\n    \"id\": 0,\n    \"name\": \"\",\n    \"cod\": 0\n  });\n  const [updateTime, setUpdateTime] = useState(null);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [expanded, setExpanded] = useState(false);\n  const [loadind, setLoading] = useState(true);\n  const classes = useStyles();\n  useEffect(() => {\n    // async function fetchWeather() {\n    //   const city = cityName;\n    //   const url = \"https://api.openweathermap.org/data/2.5/weather?q=\" +\n    //   city + \"&lang=ru&units=metric&appid=5fc73283d7afc0b780eee68e8e3bb82b\";\n    //   const responce = await fetch(url);\n    //   const data = await responce.json();\n    //   setWeatherData(data);\n    //   setUpdateTime(new Date().toLocaleTimeString());\n    //   setLoading(false);\n    // }\n    fetchWeather();\n  }, []);\n\n  async function fetchWeather() {\n    const city = cityName;\n    const url = \"https://api.openweathermap.org/data/2.5/weather?q=\" + city + \"&lang=ru&units=metric&appid=5fc73283d7afc0b780eee68e8e3bb82b\";\n    const responce = await fetch(url);\n    const data = await responce.json();\n    setWeatherData(data);\n    setUpdateTime(new Date().toLocaleTimeString());\n    setLoading(false);\n  }\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleDelete = () => {\n    setAnchorEl(null);\n    remove(city);\n  };\n\n  const handleExpand = () => {\n    setExpanded(!expanded);\n  };\n\n  if (loadind) return React.createElement(\"div\", {\n    className: \"loader\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  });\n  return React.createElement(Card, {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(CardContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"h5\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, weatherData.name), React.createElement(\"div\", {\n    className: \"crutch\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    variant: \"h2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, Math.round(weatherData.main.temp), \" \\xB0\\u0421\"), React.createElement(\"img\", {\n    className: \"image\" // src={\"http://openweathermap.org/img/w/\" +\n    //   weatherData.weather[0].icon + \".png\"}\n    // src={require(\"./\" + weatherData.weather[0].icon + \".png\")}\n    ,\n    src: process.env.PUBLIC_URL + '/' + weatherData.weather[0].icon + '.png',\n    alt: weatherData.weather.main,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  })), React.createElement(Typography, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149\n    },\n    __self: this\n  }, weatherData.weather[0].description.charAt(0).toUpperCase() + weatherData.weather[0].description.substring(1)), React.createElement(Typography, {\n    color: \"textSecondary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, \"\\u0412\\u0440\\u0435\\u043C\\u044F \\u043F\\u043E\\u0441\\u043B\\u0435\\u0434\\u043D\\u0435\\u0433\\u043E \\u043E\\u0431\\u043D\\u043E\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F: \", updateTime)), React.createElement(Collapse, {\n    in: expanded,\n    timeout: \"auto\",\n    unmountOnExit: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(CardContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }, React.createElement(Typography, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159\n    },\n    __self: this\n  }, \"\\u041C\\u0438\\u043D. t: \", Math.round(weatherData.main.temp_min), \" \\xB0\\u0421\"), React.createElement(Typography, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, \"\\u041C\\u0430\\u043A\\u0441. t: \", Math.round(weatherData.main.temp_max), \" \\xB0\\u0421\"), React.createElement(Typography, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, \"\\u041E\\u0449\\u0443\\u0449\\u0430\\u0435\\u0442\\u0441\\u044F \\u043A\\u0430\\u043A: \", Math.round(weatherData.main.feels_like), \" \\xB0\\u0421\"), React.createElement(Typography, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, \"\\u0421\\u043A\\u043E\\u0440\\u043E\\u0441\\u0442\\u044C \\u0432\\u0435\\u0442\\u0440\\u0430: \", Math.round(weatherData.wind.speed), \" \\u043C/\\u0441\"))), React.createElement(CardActions, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, React.createElement(IconButton, {\n    className: clsx(classes.expand, {\n      [classes.expandOpen]: expanded\n    }),\n    onClick: handleExpand,\n    \"aria-expanded\": expanded,\n    \"aria-label\": \"\\u0420\\u0430\\u0437\\u0432\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, React.createElement(ExpandMoreIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  })), React.createElement(IconButton, {\n    onClick: handleClick,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, React.createElement(MoreHorizIcon, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  })), React.createElement(Menu, {\n    id: \"simple-menu\",\n    anchorEl: anchorEl,\n    keepMounted: true,\n    open: Boolean(anchorEl),\n    onClose: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, React.createElement(MenuItem, {\n    onClick: () => {\n      setExpanded(false);\n      setLoading(true);\n      fetchWeather();\n      setAnchorEl(null);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\"), React.createElement(NavLink, {\n    to: \"/WeatherDetailsView\",\n    style: {\n      textDecoration: 'none',\n      color: 'inherit'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201\n    },\n    __self: this\n  }, React.createElement(MenuItem, {\n    onClick: handleClose,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }, \"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u043F\\u043E\\u0434\\u0440\\u043E\\u0431\\u043D\\u0443\\u044E \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044E\")), React.createElement(MenuItem, {\n    onClick: handleDelete,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209\n    },\n    __self: this\n  }, React.createElement(\"span\", {\n    style: {\n      color: \"#f44336\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\")))));\n}","map":{"version":3,"sources":["/Users/vlad/Desktop/weather/src/WeatherCard.js"],"names":["React","useState","useEffect","makeStyles","clsx","Card","CardContent","CardActions","Collapse","IconButton","Typography","ExpandMoreIcon","MoreHorizIcon","Menu","MenuItem","useStyles","theme","root","width","marginRight","marginBottom","borderRadius","padding","expand","transform","transition","transitions","create","duration","shortest","expandOpen","WeatherCard","city","remove","cityName","setCityName","weatherData","setWeatherData","updateTime","setUpdateTime","anchorEl","setAnchorEl","expanded","setExpanded","loadind","setLoading","classes","fetchWeather","url","responce","fetch","data","json","Date","toLocaleTimeString","handleClick","event","currentTarget","handleClose","handleDelete","handleExpand","name","Math","round","main","temp","process","env","PUBLIC_URL","weather","icon","description","charAt","toUpperCase","substring","temp_min","temp_max","feels_like","wind","speed","Boolean","textDecoration","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Collapse from '@material-ui/core/Collapse';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport './index.css';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: 345,\n    marginRight: 50,\n    marginBottom: 50,\n    borderRadius: 25,\n    padding: 10\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n}));\n\nexport default function WeatherCard({city, remove}) {\n  const [cityName, setCityName] = useState(city);\n  const [weatherData, setWeatherData] = useState({\n  \"coord\": {\n    \"lon\": 0,\n    \"lat\": 0\n  },\n  \"weather\": [\n    {\n      \"id\": 0,\n      \"main\": \"\",\n      \"description\": \"\",\n      \"icon\": \"\"\n    }\n  ],\n  \"base\": \"\",\n  \"main\": {\n    \"temp\": 0,\n    \"feels_like\": 0,\n    \"temp_min\": 0,\n    \"temp_max\": 0,\n    \"pressure\": 0,\n    \"humidity\": 0\n  },\n  \"visibility\": 0,\n  \"wind\": {\n    \"speed\": 0,\n    \"deg\": 0\n  },\n  \"clouds\": {\n    \"all\": 0\n  },\n  \"dt\": 0,\n  \"sys\": {\n    \"type\": 0,\n    \"id\": 0,\n    \"message\": 0,\n    \"country\": \"\",\n    \"sunrise\": 0,\n    \"sunset\": 0\n  },\n  \"timezone\": 0,\n  \"id\": 0,\n  \"name\": \"\",\n  \"cod\": 0\n});\n  const [updateTime, setUpdateTime] = useState(null);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [expanded, setExpanded] = useState(false);\n  const [loadind, setLoading] = useState(true);\n\n  const classes = useStyles();\n\n  useEffect(() => {\n    // async function fetchWeather() {\n    //   const city = cityName;\n    //   const url = \"https://api.openweathermap.org/data/2.5/weather?q=\" +\n    //   city + \"&lang=ru&units=metric&appid=5fc73283d7afc0b780eee68e8e3bb82b\";\n    //   const responce = await fetch(url);\n    //   const data = await responce.json();\n    //   setWeatherData(data);\n    //   setUpdateTime(new Date().toLocaleTimeString());\n    //   setLoading(false);\n    // }\n    fetchWeather();\n  }, []);\n\n  async function fetchWeather() {\n    const city = cityName;\n    const url = \"https://api.openweathermap.org/data/2.5/weather?q=\" +\n    city + \"&lang=ru&units=metric&appid=5fc73283d7afc0b780eee68e8e3bb82b\";\n    const responce = await fetch(url);\n    const data = await responce.json();\n    setWeatherData(data);\n    setUpdateTime(new Date().toLocaleTimeString());\n    setLoading(false);\n  }\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const handleDelete = () => {\n    setAnchorEl(null);\n    remove(city);\n  };\n  const handleExpand = () => {\n    setExpanded(!expanded);\n  };\n\n  if (loadind)\n    return <div className=\"loader\"></div>;\n\n  return(\n    <Card className={classes.root}>\n    <CardContent>\n      <Typography variant=\"h5\">\n        {weatherData.name}\n      </Typography>\n      <div className=\"crutch\">\n        <Typography variant=\"h2\">\n          {Math.round(weatherData.main.temp)} °С\n        </Typography>\n        <img\n          className=\"image\"\n          // src={\"http://openweathermap.org/img/w/\" +\n          //   weatherData.weather[0].icon + \".png\"}\n          // src={require(\"./\" + weatherData.weather[0].icon + \".png\")}\n          src={process.env.PUBLIC_URL + '/'+ weatherData.weather[0].icon + '.png'}\n          alt={weatherData.weather.main}\n        />\n      </div>\n      <Typography>\n        {weatherData.weather[0].description.charAt(0).toUpperCase()\n          + weatherData.weather[0].description.substring(1)}\n      </Typography>\n      <Typography color=\"textSecondary\">\n        Время последнего обновления: {updateTime}\n      </Typography>\n    </CardContent>\n    <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n      <CardContent>\n      <Typography>\n        Мин. t: {Math.round(weatherData.main.temp_min)} °С\n      </Typography>\n      <Typography>\n        Макс. t: {Math.round(weatherData.main.temp_max)} °С\n      </Typography>\n      <Typography>\n        Ощущается как: {Math.round(weatherData.main.feels_like)} °С\n      </Typography>\n      <Typography>\n        Скорость ветра: {Math.round(weatherData.wind.speed)} м/с\n      </Typography>\n      </CardContent>\n    </Collapse>\n      <CardActions>\n      <IconButton\n        className={clsx(classes.expand, {\n          [classes.expandOpen]: expanded,\n        })}\n        onClick={handleExpand}\n        aria-expanded={expanded}\n        aria-label=\"Развернуть\"\n      >\n        <ExpandMoreIcon />\n      </IconButton>\n        <IconButton onClick={handleClick}>\n          <MoreHorizIcon />\n        </IconButton>\n        <Menu\n          id=\"simple-menu\"\n          anchorEl={anchorEl}\n          keepMounted\n          open={Boolean(anchorEl)}\n          onClose={handleClose}\n          >\n          <MenuItem onClick={() => {\n            setExpanded(false);\n            setLoading(true);\n            fetchWeather();\n            setAnchorEl(null);\n          }}>Обновить\n          </MenuItem>\n          <NavLink\n            to=\"/WeatherDetailsView\"\n            style={{textDecoration: 'none', color: 'inherit'}}\n          >\n          <MenuItem onClick={handleClose}>\n            Показать подробную информацию\n          </MenuItem>\n          </NavLink>      \n          <MenuItem onClick={handleDelete}>\n          <span style={{  color: \"#f44336\"  }}>Удалить</span>\n          </MenuItem>\n        </Menu>\n      </CardActions>\n\n    </Card>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}